<app-navbar class=navbar-fixed [config]=config [filter]=filter [boundaries]=boundaries (boundaryChange)=setBoundary($event) (boundaryPolygonChange)=setBoundaryPolygon($event) [boundary]=boundary [boundaryPolygons]=boundaryPolygons [boundaryPolygon]=boundaryPolygon
    (filterChange)=setFilter($event) (stateChange)=selectState($event) (reportChange)=setReport($event) [stateSelected]=state></app-navbar>
<app-list *ngIf="state=='List'" [filter]=filter [boundary_polygon_uuid]=boundary_polygon_uuid [recordSchema]=recordSchema [recordList]=recordList (viewRecord)="viewRecord(viewpoint, $event)"></app-list>
<app-map *ngIf="state=='Map'" (setDrawing)=setDrawing($event) [fitBounds]=fitBounds [options]=options [layers]=layers [layersControl]=layersControl [boundary_polygon_uuid]=boundary_polygon_uuid (map)=setMap($event) (onSetPolygon)=setPolygon($event) [polygon]=polygon></app-map>

<button (click)=mapClick(viewpoint) [hidden]="true" id="map-popup-button"></button>
<ng-template #viewpoint let-modal>
    <div class="modal-header">
        <h4 class="modal-title">{{'Record' | translate}}
            <button type="button" class="btn float-left mx-2" aria-label="Edit" (click)="editRecord()" *ngIf="(!editing) && canWrite">
                <i-bs name="pencil-square"></i-bs>
            </button>

        </h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <app-input [config]=config *ngIf=record [record]=record [recordSchema]=recordSchema [editing]=editing></app-input>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')" i18n>Close</button>
    </div>
</ng-template>

<div id="popup-content">
    <h5>-name-</h5>
    <p>{{'Cost'| translate}}: -cost-</p>
    <p>{{'Count'| translate}}: -total-</p>
</div>
<div id="record-popup-content">
    <h3>-date-</h3>
    <p>-location-</p>
    <input id="record-uuid" value="-uuid-" type=hidden>
    <a href="#" id="open-record-popup" (click)=popClick($event)>{{'View'|translate}}</a>
</div>

<app-report *ngIf="state=='Reports' && report" [recordSchema]=recordSchema [boundaries]=boundaries [report]=report [config]=config></app-report>