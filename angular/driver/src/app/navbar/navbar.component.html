<nav class="navbar navbar-expand-lg navbar-light bg-light" style="z-index:9999">
    <div class="container-fluid">
        <a class="navbar-brand" i18n href="#">DRIVER</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown flex-fill">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {{stateSelected | translate}}
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#" (click)="onStateSelected('Map')" i18n>{{'Map' | translate}}</a></li>
                        <li><a class="dropdown-item" href="#" (click)="onStateSelected('List')" i18n>{{'List' | translate}}</a></li>
                        <li><a class="dropdown-item" href="#" (click)="onStateSelected('Reports')" i18n>{{'Reports' | translate}}</a></li>
                        <li><a class="dropdown-item" href="#" (click)="onStateSelected('Charts')" i18n>{{'Charts' | translate}}</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li>
                            <a class="dropdown-item" (click)="mapillaryAuth()" href="#">
                                <svg class="_9o1o _MapillarySVG__mapillary-logo" viewBox="0 0 273 63">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M107.843 13.2108V51.4578H100.575V31.5605L92.3989 51.4578H88.4443L80.2679 31.5605V51.4578H73V13.2108H80.4817L90.4216 37.3086L100.362 13.2108H107.843ZM139.561 21.5566H145.92V24.0438C146.348 23.1594 147.203 22.4041 148.486 21.7777C149.768 21.1513 151.175 20.8381 152.707 20.8381C154.168 20.8381 155.54 21.1789 156.822 21.8606C158.105 22.5423 159.218 23.5463 160.162 24.8728C161.106 26.1993 161.855 27.839 162.407 29.7919C162.959 31.7448 163.235 33.974 163.235 36.4796C163.235 39.0589 162.968 41.3249 162.434 43.2778C161.899 45.2307 161.169 46.8704 160.243 48.1968C159.316 49.5233 158.221 50.5182 156.956 51.1814C155.691 51.8447 154.311 52.1763 152.814 52.1763C151.211 52.1763 149.92 51.9184 148.94 51.4025C147.96 50.8867 147.256 50.2419 146.829 49.4681V61.3879L139.561 63V21.5566ZM150.997 45.0464C154.524 45.0464 156.288 42.2093 156.288 36.5348C156.288 33.7713 155.852 31.6711 154.979 30.234C154.106 28.797 152.85 28.0785 151.211 28.0785C150 28.0785 148.993 28.5114 148.192 29.3773C147.39 30.2432 146.776 31.2657 146.348 32.4448V40.9565C146.847 42.3198 147.515 43.3423 148.352 44.0239C149.189 44.7056 150.071 45.0464 150.997 45.0464ZM173.71 21.5566V51.4578H166.388V21.5566H173.71ZM166.388 14.9242C166.388 13.8556 166.727 12.9345 167.404 12.1607C168.081 11.3869 168.953 11 170.022 11C171.02 11 171.884 11.3869 172.614 12.1607C173.344 12.9345 173.71 13.8556 173.71 14.9242C173.71 15.9559 173.344 16.831 172.614 17.5495C171.884 18.268 171.02 18.6273 170.022 18.6273C168.953 18.6273 168.081 18.268 167.404 17.5495C166.727 16.831 166.388 15.9559 166.388 14.9242ZM177.504 13.7082L184.772 11.1658V51.4578H177.504V13.7082ZM188.566 13.7082L195.834 11.1658V51.4578H188.566V13.7082ZM235.272 21.5566V23.6016C235.77 22.7541 236.59 22.0817 237.73 21.5842C238.87 21.0868 240.063 20.8381 241.31 20.8381C242.13 20.8381 242.923 20.9671 243.689 21.225C244.455 21.4829 245.051 21.9067 245.479 22.4962L242.86 29.1839C241.97 28.3733 240.99 27.968 239.921 27.968C239.03 27.968 238.22 28.3088 237.489 28.9905C236.759 29.6721 236.162 30.7315 235.699 32.1685V51.4578H228.431V21.5566H235.272ZM217.342 49.2774C215.406 51.0169 213.149 52.224 210.741 52.224C202.401 52.224 198.905 45.2217 198.905 36.584C198.905 27.9462 202.401 20.944 210.741 20.944C213.333 20.944 215.537 22.0692 217.342 23.7588V21.3493H224.748V51.8186H217.342V49.2774ZM217.342 41.7259C216.415 43.8028 214.775 45.0999 212.406 45.1422C207.925 45.2224 206.206 41.4081 206.125 36.6664C206.044 31.9247 207.632 28.0512 212.113 27.9711C214.423 27.9298 216.296 29.4427 217.342 31.8768V41.7259ZM129.287 49.2774C127.351 51.0169 125.094 52.224 122.686 52.224C114.346 52.224 110.85 45.2217 110.85 36.584C110.85 27.9462 114.346 20.944 122.686 20.944C125.279 20.944 127.482 22.0692 129.287 23.7588V21.3493H136.694V51.8186H129.287V49.2774ZM129.287 41.7259C128.36 43.8028 126.72 45.0999 124.351 45.1422C119.87 45.2224 118.151 41.4081 118.07 36.6664C117.989 31.9247 119.578 28.0512 124.058 27.9711C126.369 27.9298 128.242 29.4427 129.287 31.8768V41.7259ZM258.892 62.0697H251.303L255.846 48.8601L246.333 21.5566H254.349L259.747 38.9115L265.144 21.5566H273L258.892 62.0697Z"
                                        fill="#212B36"></path>
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M1.97273 26.1264C0.212434 26.6276 -0.0427082 28.5928 1.35228 29.3491C1.85074 29.6194 22.4309 40.5244 23.2699 40.9668C24.1089 41.4091 25.1078 41.1595 25.6163 40.4101C25.9098 39.9777 26.7186 38.6458 27.3504 37.5964C27.8136 36.8271 27.3738 35.7411 26.5827 35.3649C26.1058 35.138 23.129 33.5525 20.7624 32.292C19.2042 31.4621 17.9105 30.773 17.7693 30.7056C16.0665 29.8922 16.6795 27.9608 17.9407 27.5431L24.3283 25.4276C24.9702 25.215 25.5197 24.6677 25.7365 24.0317L27.8588 17.8067C28.5044 15.9126 30.4254 16.3623 31.0631 17.5342C31.5754 18.4757 32.3865 19.9296 33.2 21.388C34.4124 23.5613 35.6304 25.7447 35.8734 26.2569C36.2795 27.1128 37.132 27.4974 38.0216 26.9449C38.2299 26.8155 38.6033 26.5962 39.0303 26.3454C39.6106 26.0046 40.2897 25.6058 40.7879 25.2955C41.6526 24.7569 41.8985 23.8231 41.5169 22.9801C41.2544 22.4001 35.9814 12.812 32.6227 6.70484C31.0997 3.93551 29.9704 1.88196 29.8803 1.70872C29.068 0.145322 27.075 0.151246 26.5244 1.76617L20.6391 19.0296C20.4171 19.6807 19.9013 20.1907 19.2405 20.4125C15.5754 21.6426 3.46416 25.7018 1.97273 26.1264ZM57.1284 58.8344C56.3013 58.3885 30.0972 44.5246 29.0166 43.9727C27.9359 43.4208 27.6726 42.4724 28.2508 41.4444C28.5449 40.9216 29.1824 39.8788 29.7019 39.0384C30.4164 37.8826 31.4578 37.8791 32.0456 38.2219C32.4102 38.4344 35.7493 40.1983 38.361 41.5779C39.9599 42.4225 41.2862 43.1231 41.4904 43.2356C42.7608 43.9352 44.6341 42.3335 43.7938 40.9303C43.3925 40.2602 39.8867 33.8656 38.7728 31.7579C38.2659 30.7989 38.4045 29.9364 39.5342 29.3624C40.0933 29.0784 41.0935 28.4855 41.9613 27.959C42.8471 27.4216 44.0262 27.8255 44.5056 28.6265C44.8217 29.1546 51.1011 40.7058 55.4716 48.7454C57.7288 52.8976 59.4768 56.1131 59.6311 56.3896C60.5305 58.0014 58.7814 59.7255 57.1284 58.8344Z"
                                        fill="#05CB63"></path>
                                </svg>
                            </a>
                        </li>

                        <li><a class="dropdown-item" (click)="download()" href="#">{{'Download' | translate}}</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" (click)="logout()" href="#">{{'Exit'|translate}} </a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarBoundariesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" *ngIf=boundary>
                        {{boundary.label}}
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarBoundariesDropdown" *ngIf=boundaries.length>
                        <li *ngFor="let b of boundaries"><a class="dropdown-item" href="#" (click)=selectBoundary(b) i18n>{{b.label}}</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarBoundaryPolygonsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <span *ngIf=!boundaryPolygon i18n>{{'All'|translate}}</span>
                        <span *ngIf=boundaryPolygon i18n>{{getBoundaryPolygonLabel(boundaryPolygon)}}</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarBoundaryPolygonsDropdown">
                        <li><a class="dropdown-item" href="#" (click)=selectBoundaryPolygon(null) i18n>All</a></li>
                        <li *ngFor="let b of boundaryPolygons"><a class="dropdown-item" href="#" (click)=selectBoundaryPolygon(b)>
                                {{getBoundaryPolygonLabel(b)}}</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <button (click)=startFilters(viewpoint) class="btn btn-outline-secondary" type="submit">
                        <i-bs name="funnel"></i-bs>
                    </button>
                </li>
                <li class="nav-item">
                    <button *ngIf="stateSelected=='Reports'" (click)=startFilters(viewpoint) class="btn btn-outline-secondary" type="submit">
                        <i-bs name="text-paragraph"></i-bs>
                        <i class="bi bi-text-paragraph"></i>

                        aaaa
                    </button>
                </li>
            </ul>

            <!--form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form-->
            <form class="d-flex">
                <div class="dropdown dropstart">
                    <button class="btn btn-light" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                        <i-bs name="three-dots-vertical"></i-bs>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton1">
                        <li>
                            <div class="dropdown-item">
                                <input class="form-check-input" [(ngModel)]="language" (change)="setlang('en')" type="radio" name="language" id="lannguageSelector1" value="en"> &nbsp;
                                <label class="form-check-label" for="lannguageSelector1" (change)="setlang('en')">
                                    English
                                </label>
                            </div>
                        </li>
                        <li>
                            <div class="dropdown-item">
                                <input class="form-check-input" [(ngModel)]="language" (change)="setlang('pt')" type="radio" name="language" id="lannguageSelector2" value="pt"> &nbsp;
                                <label class="form-check-label" for="lannguageSelector2">
                                    Portuguese
                                </label>
                            </div>
                        </li>
                        <li>
                            <div class="dropdown-item">
                                <input class="form-check-input" [(ngModel)]="language" (change)="setlang('es')" type="radio" name="language" id="lannguageSelector3" value="es"> &nbsp;
                                <label class="form-check-label" for="lannguageSelector3"> Spanish
                                </label>
                            </div>
                        </li>
                    </ul>
                </div>
            </form>
        </div>
    </div>
</nav>

<ng-template #viewpoint let-modal>
    <div class="modal-header">
        <h4 class="modal-title">{{'Filters'|translate}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <div class="row">
                <label for="dpf" i18n>{{'Interval' | translate}}</label>
            </div>
            <div class="row">
                <div class="input-group">
                    <input class="form-control" placeholder="yyyy-mm-dd" name="dpf" [(ngModel)]="occurred_min_ngb" ngbDatepicker #df="ngbDatepicker">
                    <button class="btn btn-outline-secondary calendar" (click)="df.toggle()" type="button">
                        <i-bs name="calendar"></i-bs>
                    </button>
                    <div class="input-group-prepend">
                        <span class="input-group-text" i18n>{{"to"|translate}}</span>
                    </div>
                    <input class="form-control" placeholder="yyyy-mm-dd" name="dpt" [(ngModel)]="occurred_max_ngb" ngbDatepicker #dt="ngbDatepicker">
                    <button class="btn btn-outline-secondary calendar" (click)="dt.toggle()" type="button">
                        <i-bs name="calendar"></i-bs>
                    </button>
                </div>
            </div>
        </div>
        <div class="table-group" *ngFor="let t of tables">
            <div class="form-group" *ngFor="let k of schema.definitions[t].properties | keyvalue | isSearchable | orderBy">
                <div class="row" *ngIf="k.value.enum || k.value.items">
                    <label>{{schema.properties[t].title|translate}}: {{k.key|translate}}</label>
                    <div class="input-group mb-3">
                        <div class="col">
                            <div class="form-check" *ngFor="let option of k.value | enum">
                                <input [(ngModel)]="filterPage[t][k.key][option]" class="form-check-input" type="checkbox" id="checkbox__{{t}}_{{k.key}}_{{option}}">
                                <label class="form-check-label" for="checkbox__{{t}}_{{k.key}}_{{option}}">{{option|translate}}</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" *ngIf="k.value.type=='integer'">
                    <label i18n>{{k.key|translate}}</label>
                    <div class="input-group mb-3">
                        <input type="number" class="form-control" aria-label="minimum" [(ngModel)]="filterPage[t][k.key].minimum">
                        <div class="input-group-prepend">
                            <span class="input-group-text">{{'to'|translate}}</span>
                        </div>
                        <input type="number" class="form-control" aria-label="maximum" [(ngModel)]="filterPage[t][k.key].maximum">
                        <button (click)="filterPage[t][k.key].minimum=null;filterPage[t][k.key].maximum=null">
                            <i-bs name="x"></i-bs>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="apply()" i18n>Apply</button>
        <button type="button" class="btn btn-outline-secondary" (click)="modal.close( 'Close click')" i18n>Close</button>
        <button type="button" class="btn btn-outline-secondary" (click)="modal.close( 'Close click')" i18n>Cancel</button>
    </div>
</ng-template>